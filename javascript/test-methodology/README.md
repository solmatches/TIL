# ⚙️TDD, DDD, BDD란? 테스트 방법에 대하여

다양한 유저 인풋 상황에대해 대비하고 안정적인 서비스 운영을 위한 개발 방법들은 다양하고 꾸준하게 고민 되어지고 있는 것 같다. 
개발 방법에 정답은 없다고는 하지만 많이 거론되는 TDD와 DDD, BDD 개발 방법론에 대해 알아보았다.

## TDD

대략적으로 이전에 알아보고 기억하고 있는 TDD에 대해 적어보고 추가적으로 찾아보며 보완하려고 한다.

### 내가 알고 있는 TDD

- test driven development

테스트 주도 개발이다.

코드를 작성하기 전 필요한 기능에대해 테스트를 작성하고 ‘fail’에서 ‘pass’를 만드는 방법이라고 한다.

'애자일의 꽃'이라고 표현하는 것을 보았다. (애자일과 TDD에 대해 잘 이해하고 있지 못하기 때문에 왜 꽃이라고 표현하시는지 매우 궁금하다)

- 장점은
  - 오버 엔지니어링을 막을 수 있다. 명확한 요구 기능이 있기 때문에 해당 기능만 완료되면 다른 추가적인 기능을위해 시간을 소비하는 것을 방지할 수 있다.
  - 안심하고 리팩토링 할 수 있다. 리팩토링은 늘 두려움의 대상이다. 컴포넌트를 수정하므로써 의존되어있는 다른 곳에서 사이드 이펙트가 일어나 전체적인 프로세스의 오류를 일으킬 수 있기 때문이다. 테스트 코드를 작성해두고 확인하면 다른 기능에 영향을 미치는지 테스트 해볼 수 있다.

- 단점은
  - 테스트코드는 해당 기능에 집중되어있다. 전체적인 결합도를 검증해주지는 않는다.
  - 테스트를위한 코드를 작성하게 된다. 테스트 코드를 작성하는데 어려움이 생기는 경우 테스트코드를 위해 구조를 변경해야 하는 경우가 발생할 수 있다.
  - 모든 테스트 케이스를 작성해야하는 수고로움. 
  
<br/>

여기까지가 대략적으로 기억하고 있는 TDD의 특성이었다.
이제 조금 더 자세히 TDD에 대해 공부한 것을 정리해 보고자한다. 

----

### TDD란

요구 사항을 검증하는 자동화된 테스트 케이스를 먼저 작성하고, 테스트를 통과하기위한 최소한의 코드를 작성한다.

짧고, 가독성이 좋고 유지보수 성이 좋은 코드를 작성한다.

### 장점

- 요구사항 이해도 향상
  - 테스트 코드를 작성하기전에 요구사항과 명세를 분명히 이해하고 있어야하므로 요구사항에 집중할 수 있다.
- 코드가 완성되기전에 테스트 구현체로 빠른 피드백이 가능하다.
- 개발 과정에 테스트 코드로 남아 히스토리를 파악하기 쉽다. 
- 코드의 재사용성 보장을 명시하므로 철저한 모듈화가 이루어진다. 기능 변경에도 전체적 구조에 영향을 미치지 않아 변경에 유연하다.

### 단점

- 코드량 증가
  - 테스트 코드를 먼저 작성해야하므로 코드량과 생산시간이 증가한다.
- 테스트 코드 작성에 대한 학습이 필요하며, 익숙해지는데 시간이 필요하다.

### 주의사항

- 해당 컴포넌트의 관심사를 테스트한다. 하위 컴포넌트는 현재 컴포넌트의 관심사로 분류하지 않으며, 하위 컴포넌트의 기능등은 테스트하지 않는다.
- 테스트의 목적과 필요에 맞는 테스트를한다. 테스트 커버리지 100%가 무조건 좋은 것만은 아니다. fail 부터 시작해 하나씩 pass를 늘려나간다.

### 테스트 작성시 고려해야할 것

- 세부 구현사항보다 실제 사용자 경험과 유사한 테스트를 구현한다. <br/>
ex) h1 태그로 렌더링 되었는지 보다는 이 텍스트(데이터)가 그대로 잘 렌더링 되는지는 확인한다.
  - 조회하면 조회수가 1이 올라가야하는 test가 있다면 내부의 구현이 어찌되었든 조회수가 1일 올라가면 성공이다.
- 컴포넌트의 변경사항이나 리팩토링에 영향을 덜 받는 식별자를 사용하는 것이 좋다. <br/>
ex) 'class', 'id' 보단 'role' 이용 (더불어 웹표준을 준수하여 코드를 작성할 수 있다.)

### 단위 테스트

- 가장 작은 기능을 대상으로 예상대로 동작하는지 확인한다. 대상 단위의 크기는 정해져있지 않지만, 클래스 또는 메소드 수준으로 정한다.

- 테스트 케이스 작성시 메세지에 기능의 명세를 작성한다.

### 통합 테스트

- 구현된 코드 이외에 환경적인 요소에 따라 올바르게 작동하는지 확인할 수 있다. 단위테스트에서 발견하기 어려운 버그를 찾을 수 있다.
- 테스트 케이스 작성시 비즈니스 용어를 쓴다. (개발 요구사항)

> 테스트 케이스 = 유저스토리, 즉 유저스토리가 완벽해야 TDD가 완벽해질 수 있다. <br/>
사실 모든 유저스토리를 예측하는 것이 힘들기 때문에 TDD가 어렵다고 하는것을 보았다.

<br/>

## DDD (Domain Driven Development)

일반적으로 데이터 중심 개발을 했다면, 이 테스트는 비즈니스 도메인 중심이다.

- 문서부터 코드에 이르기까지 모든 단계가 동일한 단어와 표현으로 구성되며 통일된 규칙을 이룬다. 때문에 보편적인 언어의 사용을 추구하며 분석, 설계, 구현 단계에서 통일된 방식으로 커뮤니케이션이 가능하다.

위의 설명보다 더 쉽게 이해하게 해주는 설명을 발견했는데, <br/>

‘네이버’ 사이트를 생각했을 때 ‘블로그’, ‘뉴스’, ‘쇼핑’.. 각각의 서비스 탭들이있고, 이 탭들을 각각의 도메인으로 서로 완전히 분리하여 변경과 확장에 유리하도록 개발하는 것 이 DDD의 핵심이라고 한다.

- 뉴스와 블로그의 도메인이 가진 정보들은 각각 다를 것이고 도메인이 가진 특성을 구별하여 특성에 따라 모델의 역할을 정한다. 분리된 서비스들은 외부에 공개하지 않고 private하게 관리한다.
- 직접적으로 서로 다른 도메인 영역에 접근할 수 없고, API 호출을 사용해야 한다고 한다.  

> https://lovon.tistory.com/152 
> 이 블로그에서 DDD에 대한 상세한 설명을 해주셨는데, 여러번 읽어봐도 대략적인 감도  잡히지 않는다😂 <br/>
>
> 그 중 OOP vs DDD 에 대해서 작성해 두신게 있는데, 이 전에 포프님 유튜브에서 DDD에 대해서 공부하시면서 OOP랑 유사하다는 말씀을 하셨었는데 이 블로그에서 예시를 들어 비교해주시니 확 와 닿았다! (이해했다고 하기에는.. 어렵기 때문에...)

<br/>

## BDD (Behavior Driven Development)

TDD에서 파생된 개념이라고 한다. TDD와 BDD를 명확하게 구분하기는 어렵지만, TDD가 유닛테스트 기반이라면 BDD는 결합 테스트와 시나리오 테스트까지 확장된다. 함수 단위 테스트를 지양한다.

TDD가 테스트 케이스를 만드는 것 자체에 집중한다면 BDD는 테스트 자체가 요구사항이되는 비지니스 요구사항에 집중한다는 것.

<br/>

## 느낀점

TDD의 경우 사용되는 곳이 꽤 많고 학습하시는 분들도 많아 어떤 식으로 사용되는지 알 것 같지만 다른 개념의 경우 실습해보면서 공부해봐야 대략적인 방식의 효용성을 알 수 있을 것 같다. 🤯

<br/>

## 참고

- https://manorgass.tistory.com/63
- https://lovon.tistory.com/152
- https://ebbnflow.tistory.com/271
- https://emewjin.github.io/wiki/test-posts/
- https://carpediem9911.tistory.com/36
- [테코톡 - 피카의 TDD와 단위테스트](https://youtu.be/3LMmPXoGI9Q)
- [얼페이지 - 이규원님의 TDD의 오해와 진실](https://youtu.be/N5WyUEwY0DY)
- [닥코 - 에자일의 꽃-테스트 주도 개발에대한 상념](https://youtu.be/Q2n0B92lMPk)
- [포프TV - 도메인 드리븐 디자인](https://www.youtube.com/watch?v=n_9fBLl1gb4)
